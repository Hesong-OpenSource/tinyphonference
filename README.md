# `Tinyphonference` 电话会议系统

## Introduction

### Features

电话功能与后台管理功能严格分开：

- 后台不提供任何电话功能的配置和管理能力
- 后台的所有功能（除账户管理之外）都通过读取电话子系统写入到数据库的数据完成

#### 电话

1. 使用手机/电话呼叫系统号码
2. 系统接通电话，并使用自动语音提示用户按`*`后输入要加入会议的其它人的手机
3. 用户输入手机后，系统呼叫这些号码，并在接通后加入会议
4. 如果最初呼入的手机挂断，就解散会议，挂断会议中所有其它通话

#### 后台管理

- 登录注销：登录要有`captcha`

- 账户管理：<br>
  有且只有一个超级用户；<br>
  可以修改密码和用户名；<br>
  不提供密码重置功能。

- 历史记录(Log)数据查询和导出<br>
  可导出Excel<br>

  - 对账单<br>
    只记录成功的呼叫，按分钟计费（不满一分钟算一分钟）

    - field: 同 CDR
    - condition:

      - 时间范围，按照挂机时间计算，不可超过一个自然月
      - 运营商
      - 呼叫方向
      - 通话时长秒

  - 呼叫详情记录(CDR)<br>
    成功/失败的都有

    - field:

      - ID
      - 开始时间
      - 接通时间
      - 结束时间
      - 结束原因
      - 是否接通
      - 系统挂断/用户挂断
      - 呼叫方向
      - 主叫
      - 被叫
      - 号码所属运营商：电信手机、移动手机、联通手机、固定电话。呼入时用于主叫、呼出时用于被叫
      - 通话时间长度秒
      - 通话分钟数

    - condition:

      - 时间范围，按照挂机时间计算，不可超过一个自然月
      - 运营商
      - 用户的号码
      - 呼叫方向
      - 是否呼通
      - 通话时长秒

  - 会议详情记录。会议-呼叫 Master-Detail 记录：会议-发起者-被邀请者

    - master:

      - fields: 同《CDR》

    - details:

      - fields: 同《CDR》

- 统计分析(Stat)数据

  - 呼叫数量时间段分析<br>
    按照时段统计的：呼入数量、呼出成功/失败数量、有效呼叫总数

    - chart:

      - 多线段折线或者曲线，x-时间段、y-数量
      - 折线或者曲线叠加饼图或者柱状图

    - condition:

      - 按小时统计：一个自然日之内，按照小时划分时段。只能选择一个日期。
      - 按日统计：一个自然月之内，按照天划分时段。选择一个自然月内的日期起始范围。
      - 按月统计：一个自然年之内，按照月划分时段。选择一个自然年内的月份起始范围。

  - 通话时长时间段分析<br>
    按照时段统计的：呼入时长、呼出时长<br>
    呼叫时长以分钟为单位，不足一分钟按一分钟计算

    - chart:

      - 多线段折线或者曲线，x-时间段、y-数量
      - 折线或者曲线叠加饼图或者柱状图

    - condition:

      - 按小时统计：一个自然日之内，按照小时划分时段。只能选择一个日期。
      - 按日统计：一个自然月之内，按照天划分时段。选择一个自然月内的日期起始范围。
      - 按月统计：一个自然年之内，按照月划分时段。选择一个自然年内的月份起始范围。

  - 呼出失败原因分析 按照时段统计的：各种呼叫失败数量和比例

    - chart:

      - 多线段折线或者曲线，x-时间段、y-数量
      - 折线或者曲线叠加饼图或者柱状图

    - condition:

      - 按小时统计：一个自然日之内，按照小时划分时段。只能选择一个日期。
      - 按日统计：一个自然月之内，按照天划分时段。选择一个自然月内的日期起始范围。
      - 按月统计：一个自然年之内，按照月划分时段。选择一个自然年内的月份起始范围。

- 监控(Monitor)数据

  - 性能数据<br>
    用数字、图标、图表显示重要的性能数据，有：

    - 系统负载水平。0-100，数字越大，表示负载率越高。

      - chart: 柱状图或者仪表指针图

    - 累计呼入总数：只显示数字

    - 累计呼出总数：只显示数字

    - 当前呼入：只显示数字

    - 当前呼出：只显示数字

  - 趋势曲线<br>
    以上数据的变化曲线

## Actor

- 主持人：呼入
- 与会者：被叫
- 管理员：登录 Web 后台
